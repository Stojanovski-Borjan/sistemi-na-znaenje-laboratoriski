# Вежби - Системи за препорака

## Задача 1 - Прецизност и одзив на систем за препорака
Во речникот slusanost се чуваат информации за тоа кој корисник колку пати има слушано песни од даден музички изведувач. Во речникот корисниците и артистите се претставени преку нивната единствена шифра (ID). На пример "{3: {102: 662,103: 493}}" означува дека корисникот со шифра 3, песни од музичкиот изведувач со шифра 102 има слушано 662 пати, а песни од музичкиот изведувач со шифра 103 има слушано 493 пати. Поголем број на слушања на песни од даден музички изведувач покажува дека на корисникот му се допаѓаат песните од тој изведувач.

Потребно е да направите евалуација на user-based систем за препорака на следниот начин. На влез се проследува вредност за процент според кој се прави поделба на речникот така што првите percent елементи се користат за добивање на препораките додека останатите се користат за евалуација. На пример, процент 30 означува дека за добивање на препораките треба да се користат првите 30% од елементите во речникот, додека останатите 70% се користат за евалуација.

Потоа за секој елемент од елементите за тестирање се пресметува прецизност и одзив на следниот начин. За секој елемент се отстрануваат првите 10 изведувачи со најголем број на слушани песни. Тие претставуваат множество на вистински изведувачи. Множеството на препорачани изведувачи се состои од првите 10 препорачани изведувачи со највисока вредност. Прецизноста и одзивот, за секој елемент посебно, се пресметува со следните формули (доколку нема препорачани изведувачи, прецизноста е 0):

прецизност = |relevant ∩ retrieved| / |retrieved|

одзив = |relevant ∩ retrieved| / |relevant|

retrieved - множество на препорачани изведувачи

relevant - множество на вистински изведувачи

Прецизноста и одзивот за целиот систем се добиваат како просечни вредности на прецизноста и одзивот за секој елемент.

### Sample Input  &#8594; Expected output
##### Case 1.)
Input: 45\
Output:\
Preciznost: 0.02290909090909089\
Odziv: 0.02290909090909089

##### Case 2.)
Input: 55\
Output:\
Preciznost: 0.02399999999999999\
Odziv: 0.02399999999999999

---
## Задача 2 - Препорака на нов музички изведувач
Во речникот slusanost се чуваат информации за тоа кој корисник колку пати има слушано песни од даден музички изведувач. Во речникот корисниците и артистите се претставени преку нивната единствена шифра (ID). На пример "{3: {102: 662,103: 493}}" означува дека корисникот со шифра 3, песни од музичкиот изведувач со шифра 102 има слушано 662 пати, а песни од музичкиот изведувач со шифра 103 има слушано 493 пати. Поголем број на слушања на песни од даден музички изведувач покажува дека на корисникот му се допаѓаат песните од тој изведувач.

На влез се проследува нов музички изведувач во променливата new_artist_id, и корисниците кои го слушале тој изведувач со бројот на слушања во променливата new_artist_ratings - листа во која што секој од елементите е торка (корисник, слушаност). Дополнително, во променливата user_id се чита корисникот за кој треба да се направи препорака. Новите податоци од променливата new_artist_ratings треба да се додадат во речникот slusanost, за сите корисници освен корисникот user_id. За корисникот внесен на влез user_id треба да се препорачаат музички изведувачи преку item-based систем за препорака. На излез треба да се печати дали новиот музички изведувач new_artist_id е препорачан во првите 300 препораки или не, како и сите препорачани музички изведувачи и нивната пирсонова корелација со изведувачот new_artist_id, доколку тие се корелирани, односно Пирсоновата корелација има вредност поголема или еднаква на 0.8.

### Sample Input  &#8594; Expected output
##### case 1.)
Input: 4814\
252:248, 302:3781, 327:291, 351:365, 405:908, 419:47, 472:113, 527:853\
527\
Output: \
Noviot izveduvach e preporachan vo prvite 300 preporaki.\
Preporaki:\
	- Izveduvac: 4814, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 4566, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 1596, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 279, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 2981, slichnost so noviot izveduvac: 0.8145684781588619\
	- Izveduvac: 317, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 308, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 332, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 285, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 907, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 913, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 349, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 314, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 3319, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 323, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 257, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 532, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 294, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 475, slichnost so noviot izveduvac: 1.0\
	- Izveduvac: 5462, slichnost so noviot izveduvac: 1.0


---
## Задача 3 - Препорака на автори
Во речникот book_reviews се чуваат информации за просечните оцени за автори на книги дадени од корисниците. Во речникот, корисниците и авторите се претставени преку нивната единствена шифра (ID). На пример "{3: {102: 4.5, 103: -2}}" означува дека просечната оцена за авторот 102 дадена од корисникот со шифра 3 е 4.5, а просечната оцена за авторот 103 е -2. Поголема оцена покажува дека на корисникот му се допаѓаат книгите од тој автор.

Од стандарден влез се чита корисник (user_id) и информации за неговите оцени (reviews). Потребно е да направите проверка дали додавање на корисникот даден во променливата user_id ја подобрува просечната прецизност на user-based систем за препорака со евклидово растојание. За евалуација се користат последните 30% од елементите во речникот.

За секој елемент од множеството за евалуација се отстрануваат првите 25 автори со највисоки оцени. Тие претставуваат множество на вистински автори. Множеството на препорачани автори се состои од првите 25 препорачани автори со највисока вредност. Прецизноста и одзивот, за секој елемент посебно, се пресметува со следните формули (доколку нема препорачани автори, прецизноста е 0):

прецизност = |relevant ∩ retrieved| / |retrieved|

одзив = |relevant ∩ retrieved| / |relevant|

retrieved - множество на препорачани автори

relevant - множество на вистински автори

Прецизноста и одзивот за целиот систем се добиваат како просечни вредности на прецизноста и одзивот за секој елемент.

Да се испечатат двете вредности за прецизност (со и без отстранување на корисници). Потоа да се испечати дали додавање на корисник ја зголемува, намалува или не влијае врз прецизноста на системот за препорака.


### Sample Input  &#8594; Expected output
##### case 1.)
Input: 2233\
11: 2.3, 55: 4.7, 34: -3.2\
Output: \
Preciznost bez dodavanje na korisnik: 0.012800000000000008\
Preciznost so dodavanje na korisnik: 0.012800000000000008\
Dodavanjeto na korisnik ne ja menuva preciznosta

##### case 2.)
Input: 2222\
55: -1999, 97: -1999, 180: -1999, 228: -1999, 230: -1982, 256: -1998, 279: -1996, 290: -1998, 291: -1971, 292: -733, 300: -1990, 301: -1996, 302: -1958, 305: -1994, 307: -1997, 311: -1999, 316: -1993, 317: -1998, 333: -1999, 378: -1998, 466: -1996, 534: -1998, 542: -1998, 689: -1998, 697: -1998, 704: -1999, 714: -1999, 720: -1997, 889: -1997, 1062: -1998, 1249: -1998, 1459: -1998, 1470: -1996, 1556: -1926, 2019: -1997, 2082: -1992, 2083: -1999, 2392: -1990, 2786: -1994, 3200: -1998, 3763: -1995, 4489: -1998, 4575: -1998, 5765: -1936, 5766: -1953, 5767: -1991, 5768: -1997, 5769: -1997, 5770: -1998\
Output: \
Preciznost bez dodavanje na korisnik: 0.012800000000000008\
Preciznost so dodavanje na korisnik: 0.014400000000000007\
Dodavanjeto na korisnik ja zgolemuva preciznosta
